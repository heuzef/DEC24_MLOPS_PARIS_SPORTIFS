<!DOCTYPE html>
<html>
    <head>
        <title>Documentation MLOPS : 4. Exploitation</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Documentation MLOPS</a></span>
                            </li>
                                                    <li>
                                <span><a href="Rapports_720900.html">Rapports</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Documentation MLOPS : 4. Exploitation
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                            
        
    
        
    
        
        
            Created by <span class='author'> Heuzef</span>, last modified on avr. 22, 2025
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p>Ce chapitre explique comment la solution PariVision est exploité. Cela sert également de notice d’utilisation.</p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1746800009295 {padding: 0px;}
div.rbtoc1746800009295 ul {list-style: none;margin-left: 0px;}
div.rbtoc1746800009295 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1746800009295'>
<ul class='toc-indentation'>
<li><a href='#id-4.Exploitation-PipelineETL'>Pipeline ETL</a></li>
<li><a href='#id-4.Exploitation-PipelineML'>Pipeline ML</a></li>
<li><a href='#id-4.Exploitation-Supervision'>Supervision</a></li>
<li><a href='#id-4.Exploitation-PrometheusetGrafana'>Prometheus et Grafana</a></li>
<li><a href='#id-4.Exploitation-Slack'>Slack</a></li>
<li><a href='#id-4.Exploitation-Evidently'>Evidently</a></li>
<li><a href='#id-4.Exploitation-PariVision-Exporter'>PariVision-Exporter</a></li>
</ul>
</div><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20250417-151512.png" width="730" loading="lazy" src="attachments/133627910/133103626.png?width=730" data-image-src="attachments/133627910/133103626.png" data-height="244" data-width="730" data-unresolved-comment-count="0" data-linked-resource-id="133103626" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20250417-151512.png" data-base-url="https://heuzef.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="133627910" data-linked-resource-container-version="5" data-media-id="74758283-788f-4d9c-89ab-f09ceaddb003" data-media-type="file"></span><h1 id="id-4.Exploitation-PipelineETL">Pipeline ETL</h1><p>La récupération et le traitement des données est ordonnées via Jenkins. Chaque requête  permet de collecter un certain nombre documents pour alimenter un Lac de données afin d’avoir un contrôle granulaire sur la quantité de données ingéré par le modèle.</p><p>Finalement, est effectué la transformation et le stockage des données dans un entrepôt d’exploitation.</p><h1 id="id-4.Exploitation-PipelineML">Pipeline ML</h1><p>Toujours ordonnés via Jenkins, la Pipeline complète automatisé entraîne les actions suivantes : </p><ol start="1"><li><p>Génère un rapport de surveillance de dérive des données </p></li><li><p>Entraîne un nouveau modèle sur les données fraîches et injecte toutes les métriques et artefacts sur un serveur de tracking MLFlow</p></li><li><p>Effectuer une comparaison entre tous les modèles entraînés afin de déterminer un modèle “champion”, en ce focalisant sur les scores de performance</p></li><li><p>Déploie un service conteneurisé qui charge le modèle champion et le met à disposition pour effectuer des predictions via un service API</p></li><li><p>Déploie un service conteneurisé mettant à disposition une application pour l’utilisateur final</p></li></ol><h1 id="id-4.Exploitation-Supervision">Supervision</h1><h1 id="id-4.Exploitation-PrometheusetGrafana">Prometheus et Grafana</h1><p>La supervision du projet PariVision est effectuée via Prometheus et Grafana. </p><p>Le service d’Alert Manager de Prometheus est configuré pour déclencher les alertes sur un salon SLACK dédié au projet.</p><p>Les détails de ces implémentations sont détaillés dans l’architecture ci-dessous : </p><p><code>monitoring</code><br/><code>├── alertmanager</code><br/><code>│   └── alertmanager.yml -&gt; Configuration de Alter Manager (Slack)</code><br/><code>├── evidently</code><br/><code>│   └── main.py -&gt; Génère un rapport de surveillance sur la dérive des données</code><br/><code>├── grafana</code><br/><code>│   └── provisioning -&gt; La configuration de Grafana est entièrement provisionné via GIT</code><br/><code>│       ├── dashboards -&gt; Les différents Dashbord (json) utile au projet</code><br/><code>│       └── datasources -&gt; Les sources de données (Prometheus)</code><br/><code>└── prometheus </code><br/><code>   ├── prometheus.yml -&gt; Configuration de Prometheus (Maintenances appliqués via Jenkins)</code><br/><code>   └── rules -&gt; Les règles de Prometheus</code><br/><code>       ├── alerting.rules -&gt; Règles d'alerte</code><br/><code>       └── recording.rules -&gt; Règles d'enregistrement des métriques</code><br/></p><h1 id="id-4.Exploitation-Slack">Slack</h1><p>Une application sur Slack nous à été fournit par notre mentor, cette dernière est configuré avec AlertManager nous permet de recevoir les notifications d’alert de Prometheus.</p><p>Configuration de l’application : <a href="https://dst-dec.slack.com/marketplace/A0F7XDUAZ-webhooks-entrants" class="external-link" rel="nofollow">https://dst-dec.slack.com/marketplace/A0F7XDUAZ-webhooks-entrants</a></p><p>Appel Webhooks : </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">curl -X POST --data-urlencode &quot;payload={\&quot;channel\&quot;: \&quot;#dec24cmlops_paris_sportif\&quot;, \&quot;username\&quot;: \&quot;PariVision\&quot;, \&quot;text\&quot;: \&quot;TEST ALERT PROMETHEUS\&quot;, \&quot;icon_emoji\&quot;: \&quot;:trophy:\&quot;}&quot; https://hooks.slack.com/services/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</pre>
</div></div><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20250421-222904.png" width="627" loading="lazy" src="attachments/129564694/135888907.png?width=627" data-image-src="attachments/129564694/135888907.png" data-height="87" data-width="627" data-unresolved-comment-count="0" data-linked-resource-id="135888907" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20250421-222904.png" data-base-url="https://heuzef.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="129564694" data-linked-resource-container-version="3" data-media-id="bf4b8418-d181-4215-a4df-c853358577fd" data-media-type="file"></span><h1 id="id-4.Exploitation-Evidently">Evidently</h1><p>La surveillance de la qualité des données utilisée pour l’entraînement est effectuée via Evidently afin de surveiller la dérive des données d’entrées du modèle.</p><h1 id="id-4.Exploitation-PariVision-Exporter">PariVision-Exporter</h1><p>Un exporter Prometheus sur-mesure pour le modèle de Machine Learning à été développé, afin de surveiller les métriques du modèle utilisés, comme le temps de prédiction, le nombre de prédiction effectués, etc …</p>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/133627910/133103626.png">image-20250417-151512.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on mai 09, 2025 16:13</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
